#include <stdio.h>
#include <string.h>


int main(){
    int n,is,es;
    printf("Enter no of states: ");
    scanf("%d",&n);
    
    printf("Enter no of ip symbols: ");
    scanf("%d",&is);
    
    printf("Enter no of end states: ");
    scanf("%d",&es);
    
    char start;
    printf("Enter start state(A to %c): ",'A'+n-1);
    scanf(" %c",&start);
    
    char endStates[es];
    for(int i=0;i<es;i++){
        printf("Enter end state %d: ",i+1);
        scanf(" %c", &endStates[i]);
    }
    
    char delta[n][is];
    
    for(int i=0;i<n;i++){
        for(int j=0;j<is;j++){
            printf("Enter tranisiton of %c with input %d: ",'A'+i,j);
            scanf(" %c",&delta[i][j]);
        }
    }
    
    char s[100];
    printf("Enter ip string: ");
    scanf("%s",s);
    char state=start;
    
    for(int i=0;i<strlen(s);i++){
        int ip=s[i]-'0';
        
        if(ip<0 || ip>=is){
            printf("-1");
            return 0;
        }
        char ns=delta[state-'A'][ip];
        
        printf("Transition from %c->%d->%c\n",state,ip,ns);
        state=ns;
    }
    
    int ac=0;
    
    for(int i=0;i<es;i++){
        if(endStates[i]==state){
            ac=1;
        }
    }
    
    if(ac==1){
        printf("Accepted");
    }
    else{
        printf("Rejected");
    }
    
}
